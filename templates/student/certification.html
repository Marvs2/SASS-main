{% extends "student/layout.html" %}

{% block content %}
<script>
    const form = document.querySelector('form');

    form.addEventListener('submit', function(event) {
        const student_number = document.getElementById('student_number').value.trim();
        const student_name = document.getElementById('student_name').value.trim();

        if (studentID === '' || studentName === '') {
            alert('Please fill out Student ID and Student Name');
            event.preventDefault();  // Prevent form submission
        }

        // Additional validation logic can be added here

        return true;  // Allow form submission
    });
</script>

    <h1>Request for Certification (Grades, Bonafide Student, General Weighted Average)</h1>
    <p>Process requests for certification of students and alumni. The certification is based on the records available at the respective colleges. These certifications are issued for evaluation purposes and are not a substitute for the Official Transcript of Record issued by the University Registrar.</p>

    <h2>Checklist of Requirements:</h2>
    <ul>
        <li>Accomplished Request Form from Respective Branch/Campus Offices.</li>
        <li>Identification Card (ID).</li>
    </ul>

    <h2>If Representative:</h2>
    <ul>
        <li>Authorization Letter and Identification Card (ID) if the claimant is not the owner of the document.</li>
    </ul>
    <br>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <br>
    <h2>Request Form</h2>
    <form action="{{url_for('submitcertification')}}" method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
        <label for="studentNumber">Student number:</label><br>
        <input type="text" id="studentNumber" name="studentNumber" required><br><br>

        <label for="name">Student Name:</label><br>
        <input type="text" id="name" name="name" required><br><br>

        <label for="certification_type">Certification Type:</label><br>
        <select id="certification_type" name="certification_type" required>
            <option value="Grades">Grades</option>
            <option value="Bonafide Student">Bonafide Student</option>
            <option value="General Weighted Average">General Weighted Average</option>
        </select><br><br>

        <label for="requestForm">Request Form from Respective Branch/Campus Offices:</label><br>
        <input type="file" id="requestForm" name="requestForm" required><br><br>

        <label for="identificationCard">Identification Card (ID):</label><br>
        <input type="file" id="identificationCard" name="identificationCard" required><br><br>

        <label for="is_representative">Is there a representative?</label>
        <input type="checkbox" id="is_representative" name="is_representative"><br><br>

        <div id="representativeInfo" style="display: none;">
            <label for="authorizationLetter">Authorization Letter:</label><br>
            <input type="file" id="authorizationLetter" name="authorizationLetter" required><br><br>

            <label for="representativeID">Representative's Identification Card (ID):</label><br>
            <input type="file" id="representativeID" name="representativeID" required><br><br>
        </div><br><br>

        <label for="user_responsible">User Responsible:</label>
        <select id="user_responsible" name="user_responsible" required>
            <option value="Student Services">
                Student Services
            </option>
            <option value="Receiving Staff Registrar's Office">Receiving Staff Registrar's Office</option>
            <option value="Administrative Staff Director/ Head of Academic Program">Administrative Staff Director/ Head of Academic Program</option>
            <option value="Administrative Staff Registrar's Office">Administrative Staff Registrar's Office</option>
        </select><br><br>
        
        <label for="status">Status:</label>
        <select id="status" name="status">
            <option value="Sent" selected>Sending</option>
            <option value="Pending" disabled>Pending</option>
            <option value="Approved" disabled>Approved</option>
            <option value="Rejected" disabled>Rejected</option>
        </select><br><br>


        <button type="submit">Submit Request</button>
    </form>

    <script>
        const is_representativeCheckbox = document.getElementById('is_representative');
        const representativeInfoDiv = document.getElementById('representativeInfo');

        is_RepresentativeCheckbox.addEventListener('change', function() {
            if (is_RepresentativeCheckbox.checked) {
                representativeInfoDiv.style.display = 'block';
            } else {
                representativeInfoDiv.style.display = 'none';
            }
        });

                // Automatically close the alert messages after 3 seconds
                setTimeout(function () {
            $('.alert').alert('close');
        }, 3000);

        // Optional: Add additional logic for form submission, e.g., validation, AJAX submission, etc.
        $('#applicationForm').submit(function (event) {
            // Add your form submission logic here
        });
    </script>
{% endblock content %}
