{% extends "student/home.html" %}

{% block services %}
<script>
    const form = document.querySelector('form');

    form.addEventListener('submit', function(event) {
        const studentID = document.getElementById('studentID').value.trim();
        const studentName = document.getElementById('studentName').value.trim();
        const schoolForCrossEnrollment = document.getElementById('crossEnrollmentSchool').value.trim();
        const totalUnits = document.getElementById('crossEnrollmentUnits').value.trim();
        const authorizedSubjects = document.getElementById('authorizedSubjects').value.trim();

        if (!studentID || !studentName || !schoolForCrossEnrollment || totalUnits <= 0 || !authorizedSubjects) {
            alert('Please fill out all fields and provide valid values.');
            event.preventDefault();  // Prevent form submission
        }

        // Additional validation logic can be added here
    });
</script>
    <h1>Application for Cross Enrollment</h1>
    <p>Process requests for cross-enrollment of subjects not offered for the current semester in the branch/campus. Permission must be obtained from the University Registrar, indicating the total number of units and the subject/s that the student is authorized to take from another school.</p>

    <h2>Checklist of Requirements:</h2>
    <ul>
        <li>Application Letter for Cross-Enrollment.</li>
        <li>Permit to Cross-Enroll from the Office of the University Registrar.</li>
    </ul>
    <br>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <br>

    <br>

    <h2>Application Form</h2>
    <form action="{{url_for('submit_cross_enrollment')}}" method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
        <label for="studentID">Student ID:</label><br>
        <input type="text" id="studentID" name="studentID" required><br><br>

        <label for="studentName">Student Name:</label><br>
        <input type="text" id="studentName" name="studentName" required><br><br>

        <label for="crossEnrollmentSchool">School for Cross-Enrollment:</label><br>
        <input type="text" id="crossEnrollmentSchool" name="crossEnrollmentSchool" required><br><br>

        <label for="crossEnrollmentUnits">Total Number of Units:</label><br>
        <input type="number" id="crossEnrollmentUnits" name="crossEnrollmentUnits" required><br><br>

        <label for="authorizedSubjects">Authorized Subjects to Take:</label><br>
        <textarea id="authorizedSubjects" name="authorizedSubjects" rows="4" cols="50" required></textarea><br><br>

        <label for="applicationLetter">Application Letter for Cross-Enrollment:</label><br>
        <input type="file" id="applicationLetter" name="applicationLetter" required><br><br>

        <label for="permitToCrossEnroll">Permit to Cross-Enroll from the Office of the University Registrar:</label><br>
        <input type="file" id="permitToCrossEnroll" name="permitToCrossEnroll" required><br><br>

        <button type="submit">Submit Application</button>
    </form>
    <script>
        // Automatically close the alert messages after 3 seconds
        setTimeout(function () {
            $('.alert').alert('close');
        }, 3000);

        // Optional: Add additional logic for form submission, e.g., validation, AJAX submission, etc.
        $('#applicationForm').submit(function (event) {
            // Add your form submission logic here
        });
    </script>
{% endblock %}
