{% extends "student/layout.html" %}
{% block content %}

<div class="progress progress-bar progress-bar-indeterminate bg-green"></div> 

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            {% if category == "error" %}
                <div class="toast toast-error align-items-end justify-content-end text-bg-light position-fixed top-20 end-0 m-3 fade show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="d-flex toast-content">
                        <i class="fa-solid fa-xmark wrong"></i>
                        <div class="toast-body message">
                            <span class="text text-1">Oh! Snap</span>
                            <span class="text text-2">{{ message }}</span>
                        </div>
                        <i class="fa-solid fa-xmark close"></i>
                    </div>
                </div>
            {% else %}
                <div class="toast toast-success align-items-end justify-content-end text-bg-light position-fixed top-20 end-0 m-3 fade show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="d-flex toast-content">
                      <i class="fas fa-solid fa-check check"></i>
                        <div class="toast-body message">
                            <span class="text text-1">Successful</span>
                          <span class="text text-2">{{ message }}</span>
                        </div>
                        <i class="fa-solid fa-xmark close"></i>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endwith %}


<div class="data data1">
    <div class="content-data">
        <div class="head">
            <h3>Application for Adding of Subjects</h3>           
        </div>
        <form action="{{ url_for('add_subjects') }}" method="POST" enctype="multipart/form-data" onsubmit="return validateForm()" class="application-form">
           
            <div class="row mb-3">
                <label for="StudentNumber" class="col-sm-3 col-form-label">Student Number</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" id="StudentNumber" name="StudentNumber" required onblur="getStudentNumber()" readonly>
                </div>
            </div>

            <div class="row mb-3">
                <label for="Name" class="col-sm-3 col-form-label">Name</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control" id="Name" name="Name" readonly>
                </div>
            </div>

            <div class="row mb-3">
                <label for="subject_Names" class="col-sm-3 col-form-label">Subjects to Add</label>
                <div class="col-sm-8">
                  <input type="text" class="form-control" id="subject_Names" name="subject_Names" required>
                </div>
            </div>

            <div class="row mb-3">
                <label for="enrollment_type" class="col-sm-3 col-form-label">Enrollment Type</label>
                    <div class="col-sm-8">
                        <select class="custom-select" id="enrollment_type" name="enrollment_type" required>
                            <option value="">Select Enrollment Type...</option>
                            <option value="Regular">Regular</option>
                            <option value="Irregular">Irregular</option>
                        </select>
                    </div>
            </div>

            <div class="row mb-3">
                <label for="filesubject" class="col-sm-3 col-form-label">Certificate of Registration <br> (Current Semester) </label>
                <div class="col-sm-8">
                    <input class="form-control" type="file" name="filesubject" id="filesubject" accept=".pdf" required>
                  </div>
            </div>

            <div class="row mb-3">
                <label for="user_responsible" class="col-sm-3 col-form-label">User Responsible </label>
                    <div class="col-sm-8">
                        <select class="custom-select" id="user_responsible" name="user_responsible" required>
                            <option value="Director/Head of Academic Program">Director/Head of Academic Program</option>
            <option value="CDO Cashier/Accounting Office">CDO Cashier/Accounting Office</option>
            <option value="Registrar's Office">Registrar's Office</option>
                        </select>
                    </div>
            </div>

            <div class="row mb-3">
                <label for="status" class="col-sm-3 col-form-label">Status </label>
                    <div class="col-sm-8">
                        <select class="custom-select" id="status" name="status" required>
                            <option value="Sent" selected>Sending</option>
                            <option value="Pending" disabled>Pending</option>
                            <option value="Approved" disabled>Approved</option>
                            <option value="Rejected" disabled>Rejected</option>
                        </select>
                    </div>
            </div>
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-success">Submit Application</button>|||               
                <a href="{{ url_for('viewaddsubject') }}">View AddSubject</a>
            </div>
        </form>       
    </div>
</div>

    <script>
        // Automatically close the alert messages after 3 seconds
    setTimeout(function() {
        $('.alert').alert('close');
    }, 3000);

    // Form submission logic
    $('#addsubjectsApplicationForm').submit(function(event) {
        const StudentNumber = $('#StudentNumber').val().trim();
        const Name = $('#Name').val().trim();
        const semester = $('#subject_Names').val().trim();
        const enrollment_type = $('#enrollment_type').val().trim();
        const userResponsible = $('#user_responsible').val().trim();
        const status = $('#status').val().trim();

        // Additional validation logic
        if (!StudentNumber || !Name || !semester || !enrollment_type) {
            alert('Please fill out all fields and provide valid values.');
            event.preventDefault(); // Prevent form submission
        }

        // You can add more validation logic here as needed
    });
        function validateForm() {
            var StudentNumber = document.getElementById('StudentNumber').value;
            var studentName = document.getElementById('Name').value;
            var subject_Names = document.getElementById('subject_Names').value;
            var enrollmentType = document.getElementById('enrollment_type').value;

            if (!StudentNumber || !studentName || !enrollmentType || !subject_Names) {
                console.error('Error: Please fill out all required fields.');
                return false;
            }

            return true;
        }
    </script>
{% endblock content %}


