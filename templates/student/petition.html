{% extends "student/home.html" %}

{% block services %}
    <h1>Online Petition of Subject</h1>
    <p>Process online requests for the petition of back subjects or retakes of subjects not offered for the current semester. A minimum of 35 students must request the petition to be recommended by the Administrative Building Administrative Staff ICT Office and approved by the Office of the Vice President for Branches and Campuses.</p>
    <br>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <br>
    <br>

    <h2>Petition Form</h2>
    <form id="petitionForm" action="{{url_for('submit_petition')}}" method="POST" enctype="multipart/form-data">
        <label for="studentID">Student ID:</label><br>
        <input type="text" id="studentID" name="studentID" required><br><br>

        <label for="studentName">Student Name:</label><br>
        <input type="text" id="studentName" name="studentName" required><br><br>

        <label for="subjectCode">Subject Code:</label><br>
        <input type="text" id="subjectCode" name="subjectCode" required><br><br>

        <label for="subjectName">Subject Name:</label><br>
        <input type="text" id="subjectName" name="subjectName" required><br><br>

        <label for="petitionType">Petition Type:</label><br>
        <select id="petitionType" name="petitionType" required>
            <option value="Back Subject">Back Subject</option>
            <option value="Retake">Retake</option>
            <!-- Add more options as needed -->
        </select><br><br>

        <label for="requestReason">Reason for Petition:</label><br>
        <textarea id="requestReason" name="requestReason" rows="4" cols="50" required></textarea><br><br>

        <label for="userResponsible">User Responsible:</label>
        <select id="userResponsible" name="userResponsible" required>
            <option value="Director/ Head of Academic Program">Director/ Head of Academic Program</option>
            <option value="Administrative Building Administrative Staff ICT Office">Administrative Building Administrative Staff ICT Office</option>
        </select><br><br>

        <label for="status">Status:</label>
        <select id="status" name="status">
            <option value="Sent" selected>Sending</option>
            <option value="Pending" disabled>Pending</option>
            <option value="Approved" disabled>Approved</option>
            <option value="Rejected" disabled>Rejected</option>
        </select><br><br>

        <button type="submit">Submit Petition</button>
    </form>

    <script>
        // Add your form validation logic here
        const form = document.getElementById('petitionForm');
        form.addEventListener('submit', function(event) {
            const studentID = document.getElementById('studentID').value.trim();
            const studentName = document.getElementById('studentName').value.trim();
            const subjectCode = document.getElementById('subjectCode').value.trim();
            const subjectName = document.getElementById('subjectName').value.trim();
            const petitionType = document.getElementById('petitionType').value.trim();
            const requestReason = document.getElementById('requestReason').value.trim();
            const userResponsible = document.getElementById('userResponsible').value.trim();

            if (!studentID || !studentName || !subjectCode || !subjectName || !petitionType || !requestReason || !userResponsible) {
                alert('Please fill out all fields.');
                event.preventDefault();
            }
            // You can add additional validation logic here if needed
        });
    </script>
{% endblock %}
