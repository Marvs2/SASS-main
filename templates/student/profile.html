{% extends "student/layout.html" %}

{% block content %}
<style>
    .form-container {
        max-width: 400px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f9f9f9;
    }

    label {
        display: block;
        margin-bottom: 8px;
    }

    input {
        width: 100%;
        padding: 8px;
        margin-bottom: 16px;
        box-sizing: border-box;
    }
</style>

            <div class="form-container">
                <form action="{{url_for('studentprofile')}}" method="POST">

                    <label for="StudentNumber">Student Number:</label>
                    <input type="text" id="StudentNumber" name="StudentNumber"  disabled required>
                    <br>

                    <label for="Name" id="name-label">Name:</label>
                    <input type="text" id="Name" name="Name"  disabled required>
                    <br>

                    <label for="name">Gender:</label>
                    <input type="text" id="Gender" name="Gender"  disabled required>
                    <br>
            
                    <label for="Email">Email:</label>
                    <input type="email" id="Email" name="Email"  disabled required>
                    <br>
            
                    <label for="address">Address:</label>
                    <input type="text" id="address" name="address"  disabled>
                    <br>
            
                    <label for="DateofBirth">Date of Birth:</label>
                    <input type="date" id="DateofBirth" name="DateofBirth"  disabled>
                    <br>
            
                    <label for="PlaceofBirth">Place of Birth:</label>
                    <input type="text" id="PlaceofBirth" name="PlaceofBirth"  disabled>
                    <br>
            
                    <label for="MobileNumber">Mobile Number:</label>
                    <input type="tel" id="MobileNumber" name="MobileNumber"  disabled>
                    <br>
                </form>
            </div>           

{% endblock %}

{% block script %} 
<script>
    async function fetchStudentDetails() {
        const response = await fetch(`${api_base_url}/student-details`);

        if (!response.ok) {
        throw new Error(
            `Failed to fetch data. Try to contact the admin to resolve the issue.`
        );
        }

        const data_student_details = await response.json();
        console.log('data_student_details: ', data_student_details)
        displayDetails(data_student_details);
  }

  fetchStudentDetails()

  function displayDetails(data){
    // Select the name input and set the value to data.studentName
    document.getElementById("Name").value = data.Name
    // Select the StudentNumber and set the value to data.StudentNumber
    document.getElementById("StudentNumber").value = data.StudentNumber;
    // Select the Gender and set the value to data.Gender
    document.getElementById("Gender").value = data.Gender;
    // Select the Email and set the value to data.Email
    document.getElementById("Email").value = data.Email;
    // Select the address and set the value to data.address
    document.getElementById("address").value = data.address;
    // Select the dateOfBirth and set the value to data.dateOfBirth
    document.getElementById("DateofBirth").value = data.date_of_birth_formatted;
    // Select the placeOfBirth and set the value to data.placeOfBirth
    document.getElementById("PlaceofBirth").value = data.PlaceofBirth;
    // Select the ResidentialAddress and set the value to data.ResidentialAddress
    //document.getElementById("ResidentialAddress").value = data.ResidentialAddress;
    // Select the MobileNumber and set the value to data.MobileNumber
    document.getElementById("MobileNumber").value = data.MobileNumber;

    document.getElementById('name-label').innerText = data.studentName; 
  }
</script>{% endblock script %}

<!-- 1st Step Make a script that will request in the server -->

<!-- 2nd Get the data  -->
