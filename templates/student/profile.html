{% extends "student/layout.html" %}

{% block content %}



<div class="data data1">
   
    <div class="content-data">
        <div class="head">
            <h3>Student's Profile</h3>           
        </div>
        <form action="{{url_for('studentprofile')}}" method="POST">
            <div class="form-group">
              <label for="StudentNumber" class="col-sm-2 control-label">Student Number</label>
              <div class="col-sm-4">
                <input type="text" id="StudentNumber" name="studentNumber" required="required" class="form-control" disabled>
              </div>
              <label for="DateofBirth" class="col-sm-2 control-label">Date of Birth</label>
              <div class="col-sm-4">
                <input type="text" name="DateofBirth" id="DateofBirth" required="required" class="form-control" disabled>
              </div>
            </div>

            <div class="form-group">
              <label for="Name" class="col-sm-2 control-label">Name</strong></label>
              <div class="col-sm-4">
                <input type="text" name="Name" id="Name" required="required" class="form-control" disabled>
              </div>   
              <label for="PlaceofBirth" class="col-sm-2 col-sm-2 control-label">Place of Birth</strong></label>
              <div class="col-sm-4">
                <input type="text" name="PlaceofBirth" id="PlaceofBirth" required="required" class="form-control" disabled>
              </div>
            </div>

            <div class="form-group">
            <label for="Gender" class="col-sm-2 col-sm-2 control-label">Gender</strong></label>
              <div class="col-sm-4">
               <input type="text" name="Gender" id="Gender" required="required" class="form-control" disabled> 
              </div>
              <label for="Email" class="col-sm-2 col-sm-2 control-label">Email Address</strong></label>
              <div class="col-sm-4">
                <input type="email" name="Email" id="Email" required="required" class="form-control">
              </div>
            </div>

            <div class="form-group">
            <label for="MobileNumber" class="col-sm-2 col-sm-2 control-label">Contact Number</strong></label>
            <div class="col-sm-4">
              <input type="text"  name="MobileNumber" id="MobileNumber" required="required" maxlength="11" pattern="\d{11}" class="form-control">
            </div>
              <label for="address" class="col-sm-2 col-sm-2 control-label">Address</strong></label>
              <div class="col-sm-4">
              <textarea  name="address" id="address" required="required" class="form-control"></textarea>
             </div>              
            </div>

            <div class="form-group">
              <div class="col-sm-11 text-center">
                <div class="pt-3 pl-4">
              <!---    <span><i>I hereby Certify that all the information provided are true and correct to the best of my knowledge.</i></span> -->
                </div>
              
                <div class="col-sm-13 d-flex justify-content-center">
                  <button type="submit" name="submit" class="btn btn-success ">Save Profile</button>
                </div>
              </div>
            </div>       
          </form>
    </div>
</div>

{% endblock %}

{% block script %} 
<script>
    async function fetchStudentDetails() {
        const response = await fetch(`${api_base_url}/student-details`);

        if (!response.ok) {
        throw new Error(
            `Failed to fetch data. Try to contact the admin to resolve the issue.`
        );
        }

        const data_student_details = await response.json();
        console.log('data_student_details: ', data_student_details)
        displayDetails(data_student_details);
  }

  fetchStudentDetails()

  function displayDetails(data){
    // Select the name input and set the value to data.studentName
    document.getElementById("Name").value = data.Name
    // Select the StudentNumber and set the value to data.StudentNumber
    document.getElementById("StudentNumber").value = data.StudentNumber;
    // Select the Gender and set the value to data.Gender
    document.getElementById("Gender").value = data.Gender;
    // Select the Email and set the value to data.Email
    document.getElementById("Email").value = data.Email;
    // Select the address and set the value to data.address
    document.getElementById("address").value = data.address;
    // Select the dateOfBirth and set the value to data.dateOfBirth
    const dateOfBirthInput = document.getElementById("DateofBirth");

// Format the date to display only the birthday
const formattedDateOfBirth = new Date(data.DateofBirth).toLocaleDateString('en-US', {
    month: 'numeric',
    day: 'numeric',
    year: 'numeric'
});

// Set the formatted date to the DateofBirth input
dateOfBirthInput.value = formattedDateOfBirth;

    // Select the placeOfBirth and set the value to data.placeOfBirth
    document.getElementById("PlaceofBirth").value = data.PlaceofBirth;
    // Select the ResidentialAddress and set the value to data.ResidentialAddress
    //document.getElementById("ResidentialAddress").value = data.ResidentialAddress;
    // Select the MobileNumber and set the value to data.MobileNumber
    document.getElementById("MobileNumber").value = data.MobileNumber;

    document.getElementById('name-label').innerText = data.studentName; 
  }
</script>{% endblock script %}

<!-- 1st Step Make a script that will request in the server -->

<!-- 2nd Get the data  -->





