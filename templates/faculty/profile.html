{%extends "faculty/layout.html" %}

{% block content %}
            <div class="form-container">
                <form action="{{url_for('facultyprofile')}}" method="POST">

                    <label for="faculty_Number">faculty Number:</label>
                    <input type="text" id="facultyNumber" name="facultyNumber" disabled required>
                    <br>

                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" disabled required>
                    <br>

                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" disabled required>
                    <br>

                    <label for="name">Gender:</label>
                    <input type="text" id="gender" name="gender" disabled required>
                    <br>
            
                    <label for="dateofBirth">Date of Birth:</label>
                    <input type="date" id="dateofBirth" name="dateofBirth" disabled>
                    <br>
            
                    <label for="placeofBirth">Place of Birth:</label>
                    <input type="text" id="placeofBirth" name="placeofBirth" disabled>
                    <br>
            
                    <label for="mobile_number">Mobile Number:</label>
                    <input type="number" id="mobile_number" name="mobile_number" disabled>
                    <br>
                </form>
            </div>           

{% endblock %}

{% block script %}
<script>
    async function fetchFacultyDetails() {
        const response = await fetch(`${api_base_url}/faculty-details`);

        if (!response.ok) {
            throw new Error(`Failed to fetch data. Try to contact the admin to resolve the issue.`
        );
        }

        const data_faculty_details = await response.json();
        console.log('data_faculty_details: ', data_faculty_details)
        displayDetails(data_faculty_details);
    }

    fetchFacultyDetails()

    function displayDetails(data){
        document.getElementById("facultyNumber").value = data.facultyNumber;
        document.getElementById("name").value = data.facultyName;
        document.getElementById("email").value = data.email;
        document.getElementById("gender").value = data.gender;
        document.getElementById("dateOfBirth").value = data.dateofBirth;
        document.getElementById("placeofBirth").value = data.placeofBirth;
        document.getElementById("mobile_number").value = data.mobile_number;
    }

</script>
{% endblock script %}